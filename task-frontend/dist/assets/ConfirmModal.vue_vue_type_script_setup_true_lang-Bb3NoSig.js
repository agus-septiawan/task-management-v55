import{d as C,i as b,j as y,q as M,c as n,a as t,k as x,l as w,m as k,v as h,n as V,t as u,C as j,g as z,o as d}from"./index-BdEAMFYz.js";import{u as B}from"./useTasks-BhX_Bmpf.js";const E={class:"mt-3"},U={class:"space-y-4"},$={key:0,class:"mt-1 text-sm text-red-600"},S={key:0,class:"mt-4 bg-red-50 border border-red-200 rounded-md p-4"},D={class:"text-sm text-red-600"},q={class:"flex justify-end space-x-3 mt-6"},L=["disabled"],N={key:0,class:"flex items-center"},P={key:1},O=C({__name:"EditTaskModal",props:{task:{}},emits:["close","updated"],setup(g,{emit:f}){const a=g,m=f,{updateTask:p}=B(),i=b(!1),o=b(""),s=y({title:"",description:"",status:"pending"}),r=y({title:""}),_=()=>{r.title="";let l=!0;return s.title.trim()?s.title.length>255&&(r.title="Title must be less than 255 characters",l=!1):(r.title="Title is required",l=!1),l},T=async()=>{if(_()){i.value=!0,o.value="";try{const l={title:s.title.trim(),description:s.description.trim()||void 0,status:s.status};await p(a.task.id,l)?m("updated"):o.value="Failed to update task. Please try again."}catch(l){o.value="An error occurred while updating the task.",console.error("Update task error:",l)}finally{i.value=!1}}},v=()=>{m("close")};return M(()=>{s.title=a.task.title,s.description=a.task.description||"",s.status=a.task.status}),(l,e)=>(d(),n("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:v},[t("div",{class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",onClick:e[3]||(e[3]=x(()=>{},["stop"]))},[t("div",E,[t("div",{class:"flex justify-between items-center mb-4"},[e[5]||(e[5]=t("h3",{class:"text-lg font-medium text-gray-900"},"Edit Task",-1)),t("button",{onClick:v,class:"text-gray-400 hover:text-gray-600"},e[4]||(e[4]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("form",{onSubmit:x(T,["prevent"])},[t("div",U,[t("div",null,[e[6]||(e[6]=t("label",{for:"title",class:"block text-sm font-medium text-gray-700"}," Title * ",-1)),k(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=c=>s.title=c),type:"text",required:"",class:V(["form-input mt-1",{"border-red-500":r.title}]),placeholder:"Enter task title"},null,2),[[h,s.title]]),r.title?(d(),n("p",$,u(r.title),1)):w("",!0)]),t("div",null,[e[7]||(e[7]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),k(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=c=>s.description=c),rows:"3",class:"form-input mt-1",placeholder:"Enter task description (optional)"},null,512),[[h,s.description]])]),t("div",null,[e[9]||(e[9]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700"}," Status ",-1)),k(t("select",{id:"status","onUpdate:modelValue":e[2]||(e[2]=c=>s.status=c),class:"form-select mt-1"},e[8]||(e[8]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"completed"},"Completed",-1)]),512),[[j,s.status]])])]),o.value?(d(),n("div",S,[t("p",D,u(o.value),1)])):w("",!0),t("div",q,[t("button",{type:"button",onClick:v,class:"btn-secondary"}," Cancel "),t("button",{type:"submit",disabled:i.value,class:"btn-primary"},[i.value?(d(),n("span",N,e[10]||(e[10]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),z(" Updating... ",-1)]))):(d(),n("span",P,"Update Task"))],8,L)])],32)])])]))}}),A={class:"mt-3 text-center"},F={class:"text-lg leading-6 font-medium text-gray-900 mt-4"},H={class:"mt-2 px-7 py-3"},I={class:"text-sm text-gray-500"},G={class:"flex justify-center space-x-3 mt-6"},Q=C({__name:"ConfirmModal",props:{title:{},message:{},confirmText:{default:"Confirm"}},emits:["confirm","cancel"],setup(g,{emit:f}){const a=f,m=()=>{a("confirm")},p=()=>{a("cancel")};return(i,o)=>(d(),n("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:p},[t("div",{class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",onClick:o[0]||(o[0]=x(()=>{},["stop"]))},[t("div",A,[o[1]||(o[1]=t("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[t("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t("h3",F,u(i.title),1),t("div",H,[t("p",I,u(i.message),1)]),t("div",G,[t("button",{onClick:p,class:"btn-secondary"}," Cancel "),t("button",{onClick:m,class:"btn-danger"},u(i.confirmText),1)])])])]))}});export{O as _,Q as a};
