import{d as O,i as m,z as Q,q as G,c as d,a as e,e as _,l as g,m as D,v as J,f as a,C as K,g as R,t as l,F as S,B as N,n as k,o}from"./index-BdEAMFYz.js";import{u as W}from"./useTasks-BhX_Bmpf.js";import{d as X,t as Y,g as Z,a as ee,f as te}from"./helpers-DfrTfKig.js";import{_ as se}from"./CreateTaskModal.vue_vue_type_script_setup_true_lang-BB0fCVLP.js";import{_ as ae,a as oe}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-Bb3NoSig.js";const le={class:"card p-6 mb-6"},ne={class:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4"},re={class:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4"},ie={class:"relative"},de={class:"card overflow-hidden"},ue={class:"px-6 py-4 border-b border-gray-200"},ce={class:"text-lg font-medium text-gray-900"},ve={key:0,class:"text-center py-12"},pe={key:1,class:"text-center py-12"},me={key:2,class:"overflow-x-auto"},xe={class:"min-w-full divide-y divide-gray-200"},ge={class:"bg-white divide-y divide-gray-200"},fe={class:"px-6 py-4"},ye={class:"text-sm font-medium text-gray-900"},he={key:0,class:"text-sm text-gray-500 mt-1"},ke={class:"px-6 py-4 whitespace-nowrap"},we={class:"flex items-center"},_e={class:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center mr-3"},be={class:"text-gray-600 font-medium text-sm"},Ce={class:"text-sm text-gray-900"},Te={class:"px-6 py-4 whitespace-nowrap"},Me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Pe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},$e={class:"flex justify-end space-x-2"},Be=["onClick"],je=["onClick"],De={key:3,class:"px-6 py-4 border-t border-gray-200"},Se={class:"flex items-center justify-between"},Ne={class:"text-sm text-gray-700"},Ue={class:"flex space-x-2"},Ve=["disabled"],Ae={class:"flex space-x-1"},He=["onClick"],Le=["disabled"],Qe=O({__name:"AdminTasksPage",setup(ze){const{tasks:b,loading:U,total:w,currentPage:u,limit:c,totalPages:C,hasNextPage:T,hasPrevPage:M,fetchTasks:x,deleteTask:V,nextPage:P,prevPage:$,goToPage:A}=W(),v=m(""),n=m(""),f=m(!1),y=m(!1),h=m(!1),r=m(null),H=Q(()=>{const i=[],t=Math.max(1,u.value-2),s=Math.min(C.value,u.value+2);for(let p=t;p<=s;p++)i.push(p);return i}),L=i=>`U${i}`,B=()=>{x({page:1,limit:c.value,status:n.value===""?void 0:n.value,search:v.value||void 0})},j=X(()=>{B()},500),z=i=>{r.value=i,y.value=!0},F=i=>{r.value=i,h.value=!0},E=async()=>{if(!r.value)return;await V(r.value.id)&&(h.value=!1,r.value=null,x({page:u.value,limit:c.value,status:n.value===""?void 0:n.value,search:v.value||void 0}))},I=()=>{f.value=!1,x({page:1,limit:c.value,status:n.value===""?void 0:n.value,search:v.value||void 0})},q=()=>{y.value=!1,r.value=null,x({page:u.value,limit:c.value,status:n.value===""?void 0:n.value,search:v.value||void 0})};return G(()=>{x({page:1,limit:10})}),(i,t)=>(o(),d("div",null,[t[17]||(t[17]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"All Tasks Management"),e("p",{class:"text-gray-600 mt-2"},"Manage all tasks across the system")],-1)),e("div",le,[e("div",ne,[e("div",re,[e("div",ie,[D(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),type:"text",placeholder:"Search tasks...",class:"form-input pl-10 w-full md:w-64",onInput:t[1]||(t[1]=(...s)=>a(j)&&a(j)(...s))},null,544),[[J,v.value]]),t[9]||(t[9]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),D(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.value=s),class:"form-select",onChange:B},t[10]||(t[10]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"in_progress"},"In Progress",-1),e("option",{value:"completed"},"Completed",-1)]),544),[[K,n.value]])]),e("button",{onClick:t[3]||(t[3]=s=>f.value=!0),class:"btn-primary"},t[11]||(t[11]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),R(" Create New Task ",-1)]))])]),e("div",de,[e("div",ue,[e("h2",ce," Tasks ("+l(a(w))+" total) ",1)]),a(U)?(o(),d("div",ve,t[12]||(t[12]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"text-gray-500 mt-2"},"Loading tasks...",-1)]))):a(b).length===0?(o(),d("div",pe,t[13]||(t[13]=[e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),e("p",{class:"text-gray-500"},"No tasks found",-1)]))):(o(),d("div",me,[e("table",xe,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Task "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Owner "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ge,[(o(!0),d(S,null,N(a(b),s=>(o(),d("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",fe,[e("div",null,[e("div",ye,l(s.title),1),s.description?(o(),d("div",he,l(a(Y)(s.description,100)),1)):g("",!0)])]),e("td",ke,[e("div",we,[e("div",_e,[e("span",be,l(L(s.user_id)),1)]),e("div",Ce," User #"+l(s.user_id),1)])]),e("td",Te,[e("span",{class:k(a(Z)(s.status))},l(a(ee)(s.status)),3)]),e("td",Me,l(a(te)(s.created_at)),1),e("td",Pe,[e("div",$e,[e("button",{onClick:p=>z(s),class:"text-blue-600 hover:text-blue-900",title:"Edit Task"},t[14]||(t[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Be),e("button",{onClick:p=>F(s),class:"text-red-600 hover:text-red-900",title:"Delete Task"},t[15]||(t[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,je)])])]))),128))])])])),a(C)>1?(o(),d("div",De,[e("div",Se,[e("div",Ne," Showing "+l((a(u)-1)*a(c)+1)+" to "+l(Math.min(a(u)*a(c),a(w)))+" of "+l(a(w))+" results ",1),e("div",Ue,[e("button",{onClick:t[4]||(t[4]=(...s)=>a($)&&a($)(...s)),disabled:!a(M),class:k(["btn-secondary text-sm",{"opacity-50 cursor-not-allowed":!a(M)}])}," Previous ",10,Ve),e("div",Ae,[(o(!0),d(S,null,N(H.value,s=>(o(),d("button",{key:s,onClick:p=>a(A)(s),class:k(["px-3 py-1 text-sm rounded-md",s===a(u)?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},l(s),11,He))),128))]),e("button",{onClick:t[5]||(t[5]=(...s)=>a(P)&&a(P)(...s)),disabled:!a(T),class:k(["btn-secondary text-sm",{"opacity-50 cursor-not-allowed":!a(T)}])}," Next ",10,Le)])])])):g("",!0)]),f.value?(o(),_(se,{key:0,onClose:t[6]||(t[6]=s=>f.value=!1),onCreated:I})):g("",!0),y.value&&r.value?(o(),_(ae,{key:1,task:r.value,onClose:t[7]||(t[7]=s=>y.value=!1),onUpdated:q},null,8,["task"])):g("",!0),h.value&&r.value?(o(),_(oe,{key:2,title:"Delete Task",message:`Are you sure you want to delete '${r.value.title}'? This action cannot be undone.`,"confirm-text":"Delete",onConfirm:E,onCancel:t[8]||(t[8]=s=>h.value=!1)},null,8,["message"])):g("",!0)]))}});export{Qe as default};
