import{d as O,i as m,z as Q,q as Y,c as l,a as t,l as p,e as _,m as N,v as G,f as a,C as J,g as K,F as S,B as V,n as w,o,t as f}from"./index-BdEAMFYz.js";import{u as R}from"./useTasks-BhX_Bmpf.js";import{d as W,g as X,a as Z,f as F}from"./helpers-DfrTfKig.js";import{_ as ee}from"./CreateTaskModal.vue_vue_type_script_setup_true_lang-BB0fCVLP.js";import{_ as te,a as se}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-Bb3NoSig.js";const ae={class:"card p-6 mb-6"},oe={class:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4"},le={class:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4"},ne={class:"relative"},re={key:0,class:"text-center py-12"},ie={key:1,class:"text-center py-12"},de={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},ue={class:"flex justify-between items-start mb-4"},ve={class:"text-lg font-semibold text-gray-900 flex-1 mr-2"},ce={key:0,class:"text-gray-600 text-sm mb-4 line-clamp-3"},me={class:"flex justify-between items-center text-xs text-gray-500 mb-4"},pe={key:0},fe={class:"flex justify-end space-x-2"},ge=["onClick"],xe=["onClick"],ke={key:3,class:"flex justify-center"},ye={class:"flex space-x-2"},be=["disabled"],he={class:"flex space-x-1"},we=["onClick"],Ce=["disabled"],_e=O({__name:"TasksPage",setup(C){const{tasks:k,loading:y,currentPage:d,limit:u,totalPages:T,hasNextPage:M,hasPrevPage:P,fetchTasks:g,deleteTask:H,nextPage:$,prevPage:j,goToPage:L}=R(),v=m(""),n=m(""),x=m(!1),b=m(!1),h=m(!1),r=m(null),U=Q(()=>{const i=[],e=Math.max(1,d.value-2),s=Math.min(T.value,d.value+2);for(let c=e;c<=s;c++)i.push(c);return i}),B=()=>{g({page:1,limit:u.value,status:n.value===""?void 0:n.value,search:v.value||void 0})},D=W(()=>{B()},500),z=i=>{r.value=i,b.value=!0},A=i=>{r.value=i,h.value=!0},E=async()=>{if(!r.value)return;await H(r.value.id)&&(h.value=!1,r.value=null,g({page:d.value,limit:u.value,status:n.value===""?void 0:n.value,search:v.value||void 0}))},I=()=>{x.value=!1,g({page:1,limit:u.value,status:n.value===""?void 0:n.value,search:v.value||void 0})},q=()=>{b.value=!1,r.value=null,g({page:d.value,limit:u.value,status:n.value===""?void 0:n.value,search:v.value||void 0})};return Y(()=>{g({page:1,limit:12})}),(i,e)=>(o(),l("div",null,[e[18]||(e[18]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900"},"My Tasks"),t("p",{class:"text-gray-600 mt-2"},"Manage your personal tasks")],-1)),t("div",ae,[t("div",oe,[t("div",le,[t("div",ne,[N(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),type:"text",placeholder:"Search tasks...",class:"form-input pl-10 w-full md:w-64",onInput:e[1]||(e[1]=(...s)=>a(D)&&a(D)(...s))},null,544),[[G,v.value]]),e[10]||(e[10]=t("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),N(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.value=s),class:"form-select",onChange:B},e[11]||(e[11]=[t("option",{value:""},"All Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"completed"},"Completed",-1)]),544),[[J,n.value]])]),t("button",{onClick:e[3]||(e[3]=s=>x.value=!0),class:"btn-primary"},e[12]||(e[12]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),K(" Create New Task ",-1)]))])]),a(y)?(o(),l("div",re,e[13]||(e[13]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),t("p",{class:"text-gray-500 mt-2"},"Loading tasks...",-1)]))):a(k).length===0?(o(),l("div",ie,[e[14]||(e[14]=t("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e[15]||(e[15]=t("p",{class:"text-gray-500 mb-4"},"No tasks found",-1)),t("button",{onClick:e[4]||(e[4]=s=>x.value=!0),class:"btn-primary"}," Create Your First Task ")])):(o(),l("div",de,[(o(!0),l(S,null,V(a(k),s=>(o(),l("div",{key:s.id,class:"card p-6 hover:shadow-lg transition-shadow duration-200"},[t("div",ue,[t("h3",ve,f(s.title),1),t("span",{class:w(a(X)(s.status))},f(a(Z)(s.status)),3)]),s.description?(o(),l("p",ce,f(s.description),1)):p("",!0),t("div",me,[t("span",null,"Created: "+f(a(F)(s.created_at)),1),s.updated_at?(o(),l("span",pe,"Updated: "+f(a(F)(s.updated_at)),1)):p("",!0)]),t("div",fe,[t("button",{onClick:c=>z(s),class:"text-blue-600 hover:text-blue-800 p-2 rounded-md hover:bg-blue-50",title:"Edit Task"},e[16]||(e[16]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,ge),t("button",{onClick:c=>A(s),class:"text-red-600 hover:text-red-800 p-2 rounded-md hover:bg-red-50",title:"Delete Task"},e[17]||(e[17]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,xe)])]))),128))])),a(T)>1?(o(),l("div",ke,[t("div",ye,[t("button",{onClick:e[5]||(e[5]=(...s)=>a(j)&&a(j)(...s)),disabled:!a(P),class:w(["btn-secondary",{"opacity-50 cursor-not-allowed":!a(P)}])}," Previous ",10,be),t("div",he,[(o(!0),l(S,null,V(U.value,s=>(o(),l("button",{key:s,onClick:c=>a(L)(s),class:w(["px-4 py-2 text-sm rounded-md",s===a(d)?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},f(s),11,we))),128))]),t("button",{onClick:e[6]||(e[6]=(...s)=>a($)&&a($)(...s)),disabled:!a(M),class:w(["btn-secondary",{"opacity-50 cursor-not-allowed":!a(M)}])}," Next ",10,Ce)])])):p("",!0),x.value?(o(),_(ee,{key:4,onClose:e[7]||(e[7]=s=>x.value=!1),onCreated:I})):p("",!0),b.value&&r.value?(o(),_(te,{key:5,task:r.value,onClose:e[8]||(e[8]=s=>b.value=!1),onUpdated:q},null,8,["task"])):p("",!0),h.value&&r.value?(o(),_(se,{key:6,title:"Delete Task",message:`Are you sure you want to delete '${r.value.title}'? This action cannot be undone.`,"confirm-text":"Delete",onConfirm:E,onCancel:e[9]||(e[9]=s=>h.value=!1)},null,8,["message"])):p("",!0)]))}}),Te=(C,k)=>{const y=C.__vccOpts||C;for(const[d,u]of k)y[d]=u;return y},De=Te(_e,[["__scopeId","data-v-c38e3334"]]);export{De as default};
